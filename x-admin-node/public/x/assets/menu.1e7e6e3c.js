var W=Object.defineProperty;var K=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var P=(a,x,i)=>x in a?W(a,x,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[x]=i,M=(a,x)=>{for(var i in x||(x={}))X.call(x,i)&&P(a,i,x[i]);if(K)for(var i of K(x))Y.call(x,i)&&P(a,i,x[i]);return a};import{_ as Z,s as N}from"./index.86ca5882.js";import{T as oo}from"./tree-select.2dbfea80.js";import{d as H,k as eo,y as j,l as F,b as no,p as io,r,o as _,c as S,w as l,j as n,u as o,e as g,t as R,n as Q,f as G,h as D,D as co,G as lo,i as d,E as to,P as J,Q as $}from"./vendor.76307f7a.js";import{u as ao}from"./query-table.5326dbda.js";var uo=["x-icon-home","x-icon-home2","x-icon-home3","x-icon-office","x-icon-newspaper","x-icon-pencil","x-icon-pencil2","x-icon-quill","x-icon-pen","x-icon-eyedropper","x-icon-droplet","x-icon-paint-format","x-icon-image","x-icon-images","x-icon-camera","x-icon-headphones","x-icon-music","x-icon-play","x-icon-film","x-icon-video-camera","x-icon-dice","x-icon-pacman","x-icon-spades","x-icon-clubs","x-icon-diamonds","x-icon-bullhorn","x-icon-connection","x-icon-podcast","x-icon-feed","x-icon-mic","x-icon-book","x-icon-books","x-icon-library","x-icon-file-text","x-icon-profile","x-icon-file-empty","x-icon-files-empty","x-icon-file-text2","x-icon-file-picture","x-icon-file-music","x-icon-file-play","x-icon-file-video","x-icon-file-zip","x-icon-copy","x-icon-paste","x-icon-stack","x-icon-folder","x-icon-folder-open","x-icon-folder-plus","x-icon-folder-minus","x-icon-folder-download","x-icon-folder-upload","x-icon-price-tag","x-icon-price-tags","x-icon-barcode","x-icon-qrcode","x-icon-ticket","x-icon-cart","x-icon-coin-dollar","x-icon-coin-euro","x-icon-coin-pound","x-icon-coin-yen","x-icon-credit-card","x-icon-calculator","x-icon-lifebuoy","x-icon-phone","x-icon-phone-hang-up","x-icon-address-book","x-icon-envelop","x-icon-pushpin","x-icon-location","x-icon-location2","x-icon-compass","x-icon-compass2","x-icon-map","x-icon-map2","x-icon-history","x-icon-clock","x-icon-clock2","x-icon-alarm","x-icon-bell","x-icon-stopwatch","x-icon-calendar","x-icon-printer","x-icon-keyboard","x-icon-display","x-icon-laptop","x-icon-mobile","x-icon-mobile2","x-icon-tablet","x-icon-tv","x-icon-drawer","x-icon-drawer2","x-icon-box-add","x-icon-box-remove","x-icon-download","x-icon-upload","x-icon-floppy-disk","x-icon-drive","x-icon-database","x-icon-undo","x-icon-redo","x-icon-undo2","x-icon-redo2","x-icon-forward","x-icon-reply","x-icon-bubble","x-icon-bubbles","x-icon-bubbles2","x-icon-bubble2","x-icon-bubbles3","x-icon-bubbles4","x-icon-user","x-icon-users","x-icon-user-plus","x-icon-user-minus","x-icon-user-check","x-icon-user-tie","x-icon-quotes-left","x-icon-quotes-right","x-icon-hour-glass","x-icon-spinner","x-icon-spinner2","x-icon-spinner3","x-icon-spinner4","x-icon-spinner5","x-icon-spinner6","x-icon-spinner7","x-icon-spinner8","x-icon-spinner9","x-icon-spinner10","x-icon-spinner11","x-icon-binoculars","x-icon-search","x-icon-zoom-in","x-icon-zoom-out","x-icon-enlarge","x-icon-shrink","x-icon-enlarge2","x-icon-shrink2","x-icon-key","x-icon-key2","x-icon-lock","x-icon-unlocked","x-icon-wrench","x-icon-equalizer","x-icon-equalizer2","x-icon-cog","x-icon-cogs","x-icon-hammer","x-icon-magic-wand","x-icon-aid-kit","x-icon-bug","x-icon-pie-chart","x-icon-stats-dots","x-icon-stats-bars","x-icon-stats-bars2","x-icon-trophy","x-icon-gift","x-icon-glass","x-icon-glass2","x-icon-mug","x-icon-spoon-knife","x-icon-leaf","x-icon-rocket","x-icon-meter","x-icon-meter2","x-icon-hammer2","x-icon-fire","x-icon-lab","x-icon-magnet","x-icon-bin","x-icon-bin2","x-icon-briefcase","x-icon-airplane","x-icon-truck","x-icon-road","x-icon-accessibility","x-icon-target","x-icon-shield","x-icon-power","x-icon-switch","x-icon-power-cord","x-icon-clipboard","x-icon-list-numbered","x-icon-list","x-icon-list2","x-icon-tree","x-icon-menu","x-icon-menu2","x-icon-menu3","x-icon-menu4","x-icon-cloud","x-icon-cloud-download","x-icon-cloud-upload","x-icon-cloud-check","x-icon-download2","x-icon-upload2","x-icon-download3","x-icon-upload3","x-icon-sphere","x-icon-earth","x-icon-link","x-icon-flag","x-icon-attachment","x-icon-eye","x-icon-eye-plus","x-icon-eye-minus","x-icon-eye-blocked","x-icon-bookmark","x-icon-bookmarks","x-icon-sun","x-icon-contrast","x-icon-brightness-contrast","x-icon-star-empty","x-icon-star-half","x-icon-star-full","x-icon-heart","x-icon-heart-broken","x-icon-man","x-icon-woman","x-icon-man-woman","x-icon-happy","x-icon-happy2","x-icon-smile","x-icon-smile2","x-icon-tongue","x-icon-tongue2","x-icon-sad","x-icon-sad2","x-icon-wink","x-icon-wink2","x-icon-grin","x-icon-grin2","x-icon-cool","x-icon-cool2","x-icon-angry","x-icon-angry2","x-icon-evil","x-icon-evil2","x-icon-shocked","x-icon-shocked2","x-icon-baffled","x-icon-baffled2","x-icon-confused","x-icon-confused2","x-icon-neutral","x-icon-neutral2","x-icon-hipster","x-icon-hipster2","x-icon-wondering","x-icon-wondering2","x-icon-sleepy","x-icon-sleepy2","x-icon-frustrated","x-icon-frustrated2","x-icon-crying","x-icon-crying2","x-icon-point-up","x-icon-point-right","x-icon-point-down","x-icon-point-left","x-icon-warning","x-icon-notification","x-icon-question","x-icon-plus","x-icon-minus","x-icon-info","x-icon-cancel-circle","x-icon-blocked","x-icon-cross","x-icon-checkmark","x-icon-checkmark2","x-icon-spell-check","x-icon-enter","x-icon-exit","x-icon-play2","x-icon-pause","x-icon-stop","x-icon-previous","x-icon-next","x-icon-backward","x-icon-forward2","x-icon-play3","x-icon-pause2","x-icon-stop2","x-icon-backward2","x-icon-forward3","x-icon-first","x-icon-last","x-icon-previous2","x-icon-next2","x-icon-eject","x-icon-volume-high","x-icon-volume-medium","x-icon-volume-low","x-icon-volume-mute","x-icon-volume-mute2","x-icon-volume-increase","x-icon-volume-decrease","x-icon-loop","x-icon-loop2","x-icon-infinite","x-icon-shuffle","x-icon-arrow-up-left","x-icon-arrow-up","x-icon-arrow-up-right","x-icon-arrow-right","x-icon-arrow-down-right","x-icon-arrow-down","x-icon-arrow-down-left","x-icon-arrow-left","x-icon-arrow-up-left2","x-icon-arrow-up2","x-icon-arrow-up-right2","x-icon-arrow-right2","x-icon-arrow-down-right2","x-icon-arrow-down2","x-icon-arrow-down-left2","x-icon-arrow-left2","x-icon-circle-up","x-icon-circle-right","x-icon-circle-down","x-icon-circle-left","x-icon-tab","x-icon-move-up","x-icon-move-down","x-icon-sort-alpha-asc","x-icon-sort-alpha-desc","x-icon-sort-numeric-asc","x-icon-sort-numberic-desc","x-icon-sort-amount-asc","x-icon-sort-amount-desc","x-icon-command","x-icon-shift","x-icon-ctrl","x-icon-opt","x-icon-checkbox-checked","x-icon-checkbox-unchecked","x-icon-radio-checked","x-icon-radio-checked2","x-icon-radio-unchecked","x-icon-crop","x-icon-make-group","x-icon-ungroup","x-icon-scissors","x-icon-filter","x-icon-font","x-icon-ligature","x-icon-ligature2","x-icon-text-height","x-icon-text-width","x-icon-font-size","x-icon-bold","x-icon-underline","x-icon-italic","x-icon-strikethrough","x-icon-omega","x-icon-sigma","x-icon-page-break","x-icon-superscript","x-icon-subscript","x-icon-superscript2","x-icon-subscript2","x-icon-text-color","x-icon-pagebreak","x-icon-clear-formatting","x-icon-table","x-icon-table2","x-icon-insert-template","x-icon-pilcrow","x-icon-ltr","x-icon-rtl","x-icon-section","x-icon-paragraph-left","x-icon-paragraph-center","x-icon-paragraph-right","x-icon-paragraph-justify","x-icon-indent-increase","x-icon-indent-decrease","x-icon-share","x-icon-new-tab","x-icon-embed","x-icon-embed2","x-icon-terminal","x-icon-share2","x-icon-mail","x-icon-mail2","x-icon-mail3","x-icon-mail4","x-icon-amazon","x-icon-google","x-icon-google2","x-icon-google3","x-icon-google-plus","x-icon-google-plus2","x-icon-google-plus3","x-icon-hangouts","x-icon-google-drive","x-icon-facebook","x-icon-facebook2","x-icon-instagram","x-icon-whatsapp","x-icon-spotify","x-icon-telegram","x-icon-twitter","x-icon-vine","x-icon-vk","x-icon-renren","x-icon-sina-weibo","x-icon-rss","x-icon-rss2","x-icon-youtube","x-icon-youtube2","x-icon-twitch","x-icon-vimeo","x-icon-vimeo2","x-icon-lanyrd","x-icon-flickr","x-icon-flickr2","x-icon-flickr3","x-icon-flickr4","x-icon-dribbble","x-icon-behance","x-icon-behance2","x-icon-deviantart","x-icon-500px","x-icon-steam","x-icon-steam2","x-icon-dropbox","x-icon-onedrive","x-icon-github","x-icon-npm","x-icon-basecamp","x-icon-trello","x-icon-wordpress","x-icon-joomla","x-icon-ello","x-icon-blogger","x-icon-blogger2","x-icon-tumblr","x-icon-tumblr2","x-icon-yahoo","x-icon-yahoo2","x-icon-tux","x-icon-appleinc","x-icon-finder","x-icon-android","x-icon-windows","x-icon-windows8","x-icon-soundcloud","x-icon-soundcloud2","x-icon-skype","x-icon-reddit","x-icon-hackernews","x-icon-wikipedia","x-icon-linkedin","x-icon-linkedin2","x-icon-lastfm","x-icon-lastfm2","x-icon-delicious","x-icon-stumbleupon","x-icon-stumbleupon2","x-icon-stackoverflow","x-icon-pinterest","x-icon-pinterest2","x-icon-xing","x-icon-xing2","x-icon-flattr","x-icon-foursquare","x-icon-yelp","x-icon-paypal","x-icon-chrome","x-icon-firefox","x-icon-IE","x-icon-edge","x-icon-safari","x-icon-opera","x-icon-file-pdf","x-icon-file-openoffice","x-icon-file-word","x-icon-file-excel","x-icon-libreoffice","x-icon-html-five","x-icon-html-five2","x-icon-css3","x-icon-git","x-icon-codepen","x-icon-svg","x-icon-IcoMoon"];function O(a){if(!a)return[];const x=[];for(let i=0;i<a.length;i++)a[i].menuType===1&&(x.push(M({},a[i])),a[i].children=a[i].children&&a[i].children.length?O(a[i].children):null);return x}const xo=a=>(co("data-v-4230a90f"),a=a(),lo(),a),ro=xo(()=>g("span",{class:"form-tips"},"\u4E0D\u9009\uFF0C\u5219\u76F4\u63A5\u521B\u5EFA\u4E00\u7EA7\u83DC\u5355",-1)),so=d("\u83DC\u5355"),po=d("\u6309\u94AE"),mo={class:"icon"},fo=d("\u542F\u7528"),bo=d("\u7981\u7528"),ho=d("\u53D6\u6D88"),_o=d("\u786E\u8BA4"),go=H({props:{dialogVisible:{type:Boolean},defaultVal:null},emits:["close","update"],setup(a,{emit:x}){const i=a,B=eo(),z=uo.map(u=>({value:u,label:u})),c=j({parentId:[],menuType:1,menuName:"",icon:"",path:"",menuCode:"",menuState:1,sortLevel:1}),w=F(),y=F(!1),E=F([]),T=j({menuName:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"}],path:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:"blur"}],menuCode:[{}]});function q(u){T.menuCode=[{required:u===2,message:"\u8BF7\u8F93\u5165\u6743\u9650\u6807\u8BC6",trigger:["change","blur"]}]}const v=()=>{w.value.resetFields(),x("close")},I=()=>{w.value.validate(u=>{var t;u&&(y.value=!0,N.post("/menu/operate",{action:i.defaultVal?"edit":"add",_id:(t=i.defaultVal)==null?void 0:t._id,params:M({},c)}).then(()=>{y.value=!1,v(),x("update"),to.success(`${i.defaultVal?"\u66F4\u65B0":"\u65B0\u589E"}\u6210\u529F`),B.dispatch("getMenus")}).catch(()=>{y.value=!1}))})};function V(u,t){if(!!u.data._id){if(u.data.children&&u.data.children.length){t(u.data.children);return}N.post("/menu/children",{parentId:[...u.data.parentId,u.data._id]}).then(s=>{t(s.filter(f=>f.menuType===1))})}}function C(){var u;N.post("/menu/default",{parentId:((u=i.defaultVal)==null?void 0:u.parentId)||[]}).then(t=>{E.value=t})}const m=no(()=>O(E.value));return io(()=>{C(),i.defaultVal&&(c.icon=i.defaultVal.icon,c.parentId=i.defaultVal.parentId,c.menuType=i.defaultVal.menuType,c.menuName=i.defaultVal.menuName,c.path=i.defaultVal.path,c.menuCode=i.defaultVal.menuCode,c.menuState=i.defaultVal.menuState,c.sortLevel=i.defaultVal.sortLevel)}),(u,t)=>{const s=r("el-form-item"),f=r("el-radio"),b=r("el-radio-group"),U=r("el-select-v2"),p=r("el-input"),A=r("el-form"),k=r("el-button"),L=r("el-dialog");return _(),S(L,{title:a.defaultVal?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355","model-value":a.dialogVisible,width:"700px","close-on-click-modal":!1,onClose:v},{footer:l(()=>[n(k,{onClick:v},{default:l(()=>[ho]),_:1}),n(k,{type:"primary",onClick:I,loading:y.value},{default:l(()=>[_o]),_:1},8,["loading"])]),default:l(()=>[n(A,{"label-width":"100px",model:o(c),rules:o(T),ref:(e,h)=>{h.formRef=e,w.value=e}},{default:l(()=>[n(s,{label:"\u7236\u7EA7\u83DC\u5355",prop:"parentId"},{default:l(()=>[n(oo,{disabled:!!i.defaultVal,modelValue:o(c).parentId,"onUpdate:modelValue":t[0]||(t[0]=e=>o(c).parentId=e),"value-key":"_id","node-key":"_id",lazy:"",options:o(m),"parent-key":"parentId",load:V,"default-expanded-keys":o(c).parentId,"tree-props":{label:"menuName",isLeaf:"isLeaf"}},null,8,["disabled","modelValue","options","default-expanded-keys"]),ro]),_:1}),n(s,{label:"\u83DC\u5355\u7C7B\u578B",prop:"menuType"},{default:l(()=>[n(b,{modelValue:o(c).menuType,"onUpdate:modelValue":t[1]||(t[1]=e=>o(c).menuType=e),onChange:q,disabled:!!a.defaultVal},{default:l(()=>[n(f,{label:1},{default:l(()=>[so]),_:1}),n(f,{label:2},{default:l(()=>[po]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),o(c).menuType===1?(_(),S(s,{key:0,label:"\u56FE\u6807",style:{position:"relative"}},{default:l(()=>[n(U,{modelValue:o(c).icon,"onUpdate:modelValue":t[2]||(t[2]=e=>o(c).icon=e),options:o(z),style:{width:"250px"},filterable:""},{default:l(({item:e})=>[g("div",mo,[g("span",null,R(e.label),1),g("i",{class:Q(e.value)},null,2)])]),_:1},8,["modelValue","options"]),o(c).icon?(_(),G("i",{key:0,class:Q([o(c).icon,"select-menu-icon"])},null,2)):D("",!0)]),_:1})):D("",!0),n(s,{label:`${o(c).menuType===1?"\u83DC\u5355":"\u6309\u94AE"}\u540D\u79F0`,prop:"menuName"},{default:l(()=>[n(p,{modelValue:o(c).menuName,"onUpdate:modelValue":t[3]||(t[3]=e=>o(c).menuName=e),placeholder:`\u8BF7\u8F93\u5165${o(c).menuType==="1"?"\u83DC\u5355":"\u6309\u94AE"}\u540D\u79F0`},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(c).menuType===1?(_(),S(s,{key:1,label:"\u8DEF\u7531\u5730\u5740",prop:"path"},{default:l(()=>[n(p,{modelValue:o(c).path,"onUpdate:modelValue":t[4]||(t[4]=e=>o(c).path=e),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740"},null,8,["modelValue"])]),_:1})):D("",!0),n(s,{label:"\u6743\u9650\u6807\u8BC6",prop:"menuCode"},{default:l(()=>[n(p,{modelValue:o(c).menuCode,"onUpdate:modelValue":t[5]||(t[5]=e=>o(c).menuCode=e),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),n(s,{label:"\u6392\u5E8F",prop:"sortLevel"},{default:l(()=>[n(p,{modelValue:o(c).sortLevel,"onUpdate:modelValue":t[6]||(t[6]=e=>o(c).sortLevel=e),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),n(s,{label:"\u83DC\u5355\u72B6\u6001"},{default:l(()=>[n(b,{modelValue:o(c).menuState,"onUpdate:modelValue":t[7]||(t[7]=e=>o(c).menuState=e)},{default:l(()=>[n(f,{label:1},{default:l(()=>[fo]),_:1}),n(f,{label:2},{default:l(()=>[bo]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","model-value"])}}});var yo=Z(go,[["__scopeId","data-v-4230a90f"]]);const ko={class:"menu"},wo={class:"query-form"},vo=d("\u67E5\u8BE2"),Vo=d("\u91CD\u7F6E"),Co={class:"base-table"},Fo={class:"action"},Do=d("\u65B0\u589E"),Bo=d("\u7F16\u8F91"),Eo=d("\u5220\u9664"),zo=H({setup(a){const x=F(),i=j({menuState:"",menuName:""}),B=F();function z(C,m,u){N.post("/menu/children",{parentId:[...C.parentId,C._id]}).then(t=>{u(t)})}const{tableLoading:c,filterTable:w,resetForm:y,tableData:E,getList:T,deleteRows:q,editRow:v,dialogVisible:I,toggleDialog:V}=ao({form:i,formRef:B,url:"/menu/list",deleteUrl:"/menu/operate",tableRef:x});return(C,m)=>{const u=r("el-input"),t=r("el-form-item"),s=r("el-option"),f=r("el-select"),b=r("el-button"),U=r("el-form"),p=r("el-table-column"),A=r("el-table"),k=J("permission"),L=J("loading");return _(),G("div",ko,[g("div",wo,[n(U,{inline:"",size:"mini",model:o(i),ref:(e,h)=>{h.formRef=e,B.value=e}},{default:l(()=>[n(t,{label:"\u83DC\u5355\u540D\u79F0",prop:"menuName"},{default:l(()=>[n(u,{modelValue:o(i).menuName,"onUpdate:modelValue":m[0]||(m[0]=e=>o(i).menuName=e)},null,8,["modelValue"])]),_:1}),n(t,{label:"\u83DC\u5355\u72B6\u6001",prop:"menuState"},{default:l(()=>[n(f,{modelValue:o(i).menuState,"onUpdate:modelValue":m[1]||(m[1]=e=>o(i).menuState=e)},{default:l(()=>[n(s,{label:"\u542F\u7528",value:1}),n(s,{label:"\u7981\u7528",value:2})]),_:1},8,["modelValue"])]),_:1}),n(t,null,{default:l(()=>[n(b,{type:"primary",onClick:o(w)},{default:l(()=>[vo]),_:1},8,["onClick"]),n(b,{onClick:o(y)},{default:l(()=>[Vo]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),g("div",Co,[g("div",Fo,[$(n(b,{type:"primary",size:"mini",onClick:m[2]||(m[2]=e=>o(V)(!0))},{default:l(()=>[Do]),_:1},512),[[k,["menu:add"]]])]),$(n(A,{ref:(e,h)=>{h.tableRef=e,x.value=e},data:o(E),"row-key":"_id",border:"",lazy:"",load:z,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:l(()=>[n(p,{prop:"menuName",label:"\u83DC\u5355\u540D\u79F0",width:"200"}),n(p,{prop:"icon",label:"\u56FE\u6807"},{default:l(e=>[e.row.icon?(_(),G("i",{key:0,class:Q(e.row.icon)},null,2)):D("",!0)]),_:1}),n(p,{prop:"menuType",label:"\u83DC\u5355\u7C7B\u578B"},{default:l(e=>[d(R(e.row.menuType===1?"\u83DC\u5355":"\u6309\u94AE"),1)]),_:1}),n(p,{prop:"path",label:"\u8DEF\u7531\u5730\u5740"}),n(p,{prop:"menuState",label:"\u83DC\u5355\u72B6\u6001"},{default:l(e=>[d(R(e.row.menuState===1?"\u542F\u7528":"\u7981\u7528"),1)]),_:1}),n(p,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":""}),n(p,{prop:"name",label:"\u64CD\u4F5C",width:"150"},{default:l(e=>[$(n(b,{type:"primary",size:"mini",onClick:h=>o(V)(!0,e.row)},{default:l(()=>[Bo]),_:2},1032,["onClick"]),[[k,["menu:edit"]]]),$(n(b,{type:"danger",size:"mini",onClick:h=>o(q)(e.row._id,"_id",!1)},{default:l(()=>[Eo]),_:2},1032,["onClick"]),[[k,["menu:delete"]]])]),_:1})]),_:1},8,["data"]),[[L,o(c)]])]),o(I)?(_(),S(yo,{key:0,"dialog-visible":o(I),"default-val":o(v),onClose:m[3]||(m[3]=e=>o(V)(!1)),onUpdate:o(T)},null,8,["dialog-visible","default-val","onUpdate"])):D("",!0)])}}});export{zo as default};
