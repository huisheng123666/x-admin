var ee=Object.defineProperty;var Q=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var S=(s,a,u)=>a in s?ee(s,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[a]=u,z=(s,a)=>{for(var u in a||(a={}))le.call(a,u)&&S(s,u,a[u]);if(Q)for(var u of Q(a))te.call(a,u)&&S(s,u,a[u]);return s};import{u as oe}from"./query-table.1b67047e.js";import{s as N,_ as ae}from"./index.61b28d01.js";import{d as G,y as j,l as F,r as n,o as D,c as H,w as o,j as e,u as l,i as _,P as ue,f as J,e as E,Q as ne,h as K,R as ie,E as se}from"./vendor.1d842864.js";const de=_("\u786E\u8BA4"),re=G({props:{dialogVisible:{type:Boolean},defaultVal:null},emits:["close","update"],setup(s,{emit:a}){var h;const u=s,f=j({clicks:((h=u.defaultVal)==null?void 0:h.clicks)||0}),V=F(),r=F(!1);function A(){V.value.validate(x=>{x&&(r.value=!0,N.post("/movie/edit",z({id:u.defaultVal.id},f)).then(()=>{r.value=!1,a("close"),a("update")}).catch(()=>{r.value=!1}))})}return(x,v)=>{var d;const g=n("el-input"),k=n("el-form-item"),B=n("el-form"),R=n("el-button"),U=n("el-dialog");return D(),H(U,{"model-value":s.dialogVisible,title:(d=s.defaultVal)==null?void 0:d.title,onClose:v[1]||(v[1]=p=>a("close")),width:"500px"},{footer:o(()=>[e(R,{type:"primary",onClick:A,loading:r.value},{default:o(()=>[de]),_:1},8,["loading"])]),default:o(()=>[e(B,{model:l(f),ref:(p,$)=>{$.formRef=p,V.value=p}},{default:o(()=>[e(k,{label:"\u70B9\u51FB\u91CF",prop:"clicks",required:""},{default:o(()=>[e(g,{type:"number",modelValue:l(f).clicks,"onUpdate:modelValue":v[0]||(v[0]=p=>l(f).clicks=p)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title"])}}});const pe={class:"movie"},ce={class:"query-form"},me=_("\u641C\u7D22"),_e=_("\u91CD\u7F6E"),fe={class:"base-table"},ve={class:"action"},ge=_("\u5355\u6761\u83B7\u53D6"),be=_("\u5220\u9664"),ye=_("\u8BD5\u64AD"),Ce=_("\u7F16\u8F91"),we={class:"pagination"},he=["src"],Fe=G({setup(s){const a=j({type:"",name:""}),u=F(),{tableData:f,tableLoading:V,page:r,changePage:A,filterTable:h,resetForm:x,getList:v,editRow:g,toggleDialog:k,dialogVisible:B,updateList:R}=oe({url:"/movie/list",form:a,formRef:u});function U(b){ie.confirm("\u786E\u8BA4\u5220\u9664\u8BE5\u7535\u5F71\uFF1F","\u63D0\u793A").then(()=>{N.delete("/movie/"+b.id).then(()=>{v()})})}const d=j({id:"",type:""}),p=F();function $(){p.value.validate(b=>{b&&N.post("/movie/single",z({},d)).then(i=>{se.success("\u83B7\u53D6\u6210\u529F"),h()})})}const q=F(!1);function L(b,i=null){q.value=b,g.value=i}return(b,i)=>{var I;const P=n("el-input"),y=n("el-form-item"),c=n("el-option"),M=n("el-select"),C=n("el-button"),T=n("el-form"),m=n("el-table-column"),O=n("el-image"),W=n("el-table"),X=n("el-pagination"),Y=n("el-dialog"),Z=ue("loading");return D(),J("div",pe,[E("div",ce,[e(T,{model:l(a),ref:(t,w)=>{w.formRef=t,u.value=t},inline:"",size:"mini"},{default:o(()=>[e(y,{prop:"name"},{default:o(()=>[e(P,{placeholder:"\u8BF7\u8F93\u5165\u7535\u5F71\u540D",modelValue:l(a).name,"onUpdate:modelValue":i[0]||(i[0]=t=>l(a).name=t)},null,8,["modelValue"])]),_:1}),e(y,{prop:"type"},{default:o(()=>[e(M,{modelValue:l(a).type,"onUpdate:modelValue":i[1]||(i[1]=t=>l(a).type=t)},{default:o(()=>[e(c,{value:1,label:"\u7535\u5F71"}),e(c,{value:14,label:"\u7535\u89C6\u5267"}),e(c,{value:21,label:"\u7EFC\u827A"}),e(c,{value:26,label:"\u52A8\u6F2B"})]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:o(()=>[e(C,{type:"primary",onClick:l(h)},{default:o(()=>[me]),_:1},8,["onClick"]),e(C,{type:"warning",onClick:l(x)},{default:o(()=>[_e]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),E("div",fe,[E("div",ve,[e(T,{inline:"",size:"mini",model:l(d),ref:(t,w)=>{w.singleFormRef=t,p.value=t}},{default:o(()=>[e(y,{prop:"id",required:""},{default:o(()=>[e(P,{modelValue:l(d).id,"onUpdate:modelValue":i[2]||(i[2]=t=>l(d).id=t),placeholder:"\u8BF7\u8F93\u5165id"},null,8,["modelValue"])]),_:1}),e(y,{prop:"type",required:""},{default:o(()=>[e(M,{modelValue:l(d).type,"onUpdate:modelValue":i[3]||(i[3]=t=>l(d).type=t)},{default:o(()=>[e(c,{value:1,label:"\u7535\u5F71"}),e(c,{value:14,label:"\u7535\u89C6\u5267"}),e(c,{value:21,label:"\u7EFC\u827A"}),e(c,{value:26,label:"\u52A8\u6F2B"})]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:o(()=>[e(C,{type:"primary",onClick:$},{default:o(()=>[ge]),_:1})]),_:1})]),_:1},8,["model"])]),ne(e(W,{data:l(f)},{default:o(()=>[e(m,{label:"\u540D\u79F0",prop:"title",width:"120px","show-overflow-tooltip":""}),e(m,{label:"\u5C01\u9762",width:"180px"},{default:o(t=>[e(O,{src:t.row.cover,style:{width:"80px",height:"45px"},fit:"cover","preview-src-list":[t.row.cover]},null,8,["src","preview-src-list"])]),_:1}),e(m,{label:"\u5BFC\u6F14",prop:"director","min-width":"120px","show-overflow-tooltip":""}),e(m,{label:"\u6F14\u5458",prop:"actor","min-width":"120px","show-overflow-tooltip":""}),e(m,{label:"\u8BED\u8A00",prop:"language",width:"80px"}),e(m,{label:"\u5730\u533A",prop:"area",width:"80px"}),e(m,{label:"\u7C7B\u578B",prop:"category",width:"80px"}),e(m,{label:"\u64CD\u4F5C",fixed:"right",width:"120px"},{default:o(t=>[e(C,{onClick:w=>U(t.row),type:"text",style:{color:"red"}},{default:o(()=>[be]),_:2},1032,["onClick"]),e(C,{onClick:w=>L(!0,t.row),type:"text"},{default:o(()=>[ye]),_:2},1032,["onClick"]),e(C,{type:"text",onClick:w=>l(k)(!0,t.row)},{default:o(()=>[Ce]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),[[Z,l(V)]]),E("div",we,[e(X,{background:"",layout:"prev, pager, next",total:l(r).total,"current-page":l(r).pageNum,"page-size":l(r).pageSize,onCurrentChange:l(A)},null,8,["total","current-page","page-size","onCurrentChange"])])]),e(Y,{title:(I=l(g))==null?void 0:I.title,"model-value":q.value,width:"800px",onClose:i[4]||(i[4]=t=>L(!1)),"close-on-click-modal":!1},{default:o(()=>{var t;return[q.value?(D(),J("iframe",{key:0,src:(t=l(g))==null?void 0:t.playUrls[0][0],allowfullscreen:""},null,8,he)):K("",!0)]}),_:1},8,["title","model-value"]),l(B)?(D(),H(re,{key:0,dialogVisible:l(B),defaultVal:l(g),onClose:i[5]||(i[5]=t=>l(k)(!1)),onUpdate:l(R)},null,8,["dialogVisible","defaultVal","onUpdate"])):K("",!0)])}}});var De=ae(Fe,[["__scopeId","data-v-4c86ae88"]]);export{De as default};
