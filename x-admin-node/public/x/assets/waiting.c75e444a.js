import{u as H}from"./query-table.39691fb9.js";import{d as J,k as K,l as k,y as M,b as x,r as a,o as g,f as O,e as y,j as e,u as t,w as l,c as T,U as W,h as V,i as n,t as i}from"./vendor.1d842864.js";import{s as X}from"./index.908b5ecc.js";const Y={class:"audit-waiting"},Z={class:"query-form"},ee=n("\u67E5\u8BE2"),te=n("\u91CD\u7F6E"),le={class:"base-table"},ae=n("\u5BA1\u6279"),ue={class:"pagination"},oe=n("\u786E\u5B9A"),ce=J({setup(se){const h=K(),A=k(),d=M({applyState:""}),f=k(!1),S=x(()=>h.state.userinfo),{resetForm:D,filterTable:N,tableData:U,page:b,changePage:L,editRow:o,dialogVisible:_,toggleDialog:v,getList:j}=H({url:"/leave/waiting",form:d,formRef:A}),C=x(()=>o.value?o.value.applyState<3?{active:o.value.applyState,lastText:"\u5BA1\u6279\u901A\u8FC7"}:{active:3,lastText:o.value.applyStateLabel}:{active:1,lastText:"\u5BA1\u6279\u901A\u8FC7"});function z(){X.post("/leave/approval",{_id:o.value._id,pass:f.value}).then(()=>{v(!1),j()})}return(ne,p)=>{const c=a("el-option"),R=a("el-select"),F=a("el-form-item"),m=a("el-button"),w=a("el-form"),s=a("el-table-column"),I=a("el-table"),q=a("el-pagination"),B=a("el-step"),$=a("el-steps"),r=a("el-descriptions-item"),P=a("el-descriptions"),Q=a("el-switch"),G=a("el-dialog");return g(),O("div",Y,[y("div",Z,[e(w,{inline:"",ref:(u,E)=>{E.formRef=u,A.value=u},model:t(d)},{default:l(()=>[e(F,{label:"\u5BA1\u6279\u72B6\u6001",prop:"applyState"},{default:l(()=>[e(R,{modelValue:t(d).applyState,"onUpdate:modelValue":p[0]||(p[0]=u=>t(d).applyState=u)},{default:l(()=>[e(c,{label:"\u5F85\u5BA1\u6279",value:1}),e(c,{label:"\u5BA1\u6279\u4E2D",value:2}),e(c,{label:"\u5BA1\u6279\u62D2\u7EDD",value:3}),e(c,{label:"\u5BA1\u6279\u901A\u8FC7",value:4}),e(c,{label:"\u4F5C\u5E9F",value:5})]),_:1},8,["modelValue"])]),_:1}),e(F,null,{default:l(()=>[e(m,{type:"primary",onClick:t(N)},{default:l(()=>[ee]),_:1},8,["onClick"]),e(m,{onClick:t(D)},{default:l(()=>[te]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),y("div",le,[e(I,{data:t(U)},{default:l(()=>[e(s,{label:"\u5355\u53F7",prop:"orderNo"}),e(s,{label:"\u7533\u8BF7\u4EBA",prop:"applyUser.userName"}),e(s,{label:"\u4F11\u5047\u65F6\u95F4",prop:"startTime"}),e(s,{label:"\u4F11\u5047\u65F6\u957F",prop:"leaveTime"}),e(s,{label:"\u4F11\u5047\u7C7B\u578B",prop:"applyTypeLabel"}),e(s,{label:"\u4F11\u5047\u539F\u56E0",prop:"reasons","show-overflow-tooltip":""}),e(s,{label:"\u7533\u8BF7\u65F6\u95F4",prop:"createTime","show-overflow-tooltip":""}),e(s,{label:"\u5BA1\u6279\u4EBA",prop:"auditFlowsNames"}),e(s,{label:"\u5F53\u524D\u5BA1\u6279\u4EBA",prop:"curAuditUser.userName"}),e(s,{label:"\u5BA1\u6279\u72B6\u6001",prop:"applyStateLabel"}),e(s,{label:"\u64CD\u4F5C"},{default:l(u=>[u.row.curAuditUser.userId===t(S).userId&&u.row.applyState<3?(g(),T(m,{key:0,onClick:E=>t(v)(!0,u.row)},{default:l(()=>[ae]),_:2},1032,["onClick"])):V("",!0)]),_:1})]),_:1},8,["data"]),y("div",ue,[e(q,{background:"",layout:"prev, pager, next",total:t(b).total,"current-page":t(b).pageNum,"page-size":t(b).pageSize,onCurrentChange:t(L)},null,8,["total","current-page","page-size","onCurrentChange"])])]),t(_)?(g(),T(G,{key:0,title:"\u4F11\u5047\u8BE6\u60C5",width:"600px",modelValue:t(_),"onUpdate:modelValue":p[2]||(p[2]=u=>W(_)?_.value=u:null),onClose:p[3]||(p[3]=u=>t(v)(!1)),"close-on-click-modal":!1},{footer:l(()=>[e(m,{type:"primary",onClick:z},{default:l(()=>[oe]),_:1})]),default:l(()=>[e($,{active:t(C).active,"align-center":""},{default:l(()=>[e(B,{title:"\u5F85\u5BA1\u6279"}),e(B,{title:"\u5BA1\u6279\u4E2D"}),e(B,{title:t(C).lastText},null,8,["title"])]),_:1},8,["active"]),e(P,{column:2,style:{"margin-top":"20px",padding:"0 65px"}},{default:l(()=>[e(r,{label:"\u4F11\u5047\u7C7B\u578B"},{default:l(()=>[n(i(t(o).applyTypeLabel),1)]),_:1}),e(r,{label:"\u4F11\u5047\u65F6\u95F4"},{default:l(()=>[n(i(t(o).startTime),1)]),_:1}),e(r,{label:"\u4F11\u5047\u65F6\u957F"},{default:l(()=>[n(i(t(o).leaveTime),1)]),_:1}),e(r,{label:"\u4F11\u5047\u539F\u56E0"},{default:l(()=>[n(i(t(o).reasons),1)]),_:1}),e(r,{label:"\u5BA1\u6279\u72B6\u6001"},{default:l(()=>[n(i(t(o).applyStateLabel),1)]),_:1}),e(r,{label:"\u5BA1\u6279\u4EBA"},{default:l(()=>[n(i(t(o).curAuditUser.userName),1)]),_:1})]),_:1}),e(w,{"label-width":"110px",style:{"margin-top":"20px"},size:"small"},{default:l(()=>[e(F,{label:"\u901A\u8FC7\uFF1A"},{default:l(()=>[e(Q,{modelValue:f.value,"onUpdate:modelValue":p[1]||(p[1]=u=>f.value=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):V("",!0)])}}});export{ce as default};
